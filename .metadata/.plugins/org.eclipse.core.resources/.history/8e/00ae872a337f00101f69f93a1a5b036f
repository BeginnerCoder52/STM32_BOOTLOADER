/*
 * app_meta.h
 * Shared metadata structure and constants between Bootloader, APP_CURRENT, and APP_OLD
 */
#ifndef __APP_META_H
#define __APP_META_H

typedef struct __attribute__((packed)) {
    uint32_t magic;
    uint32_t flag;
    uint32_t version;
    uint32_t crc32;
} app_meta_t;

/* Base addresses for metadata */
#define APP_CURRENT_META_ADDR   0x08011C00UL
#define APP_OLD_META_ADDR       0x0801FC00UL

#define META_MAGIC              0x5A5A55AAUL
#define META_FLAG_FW_READY      0x46575244UL
#define META_FLAG_APP_OK        0x4150504FUL
#define META_FLAG_EMPTY         0xFFFFFFFFUL

/* Function prototypes */
void app_meta_write(uint32_t addr, const app_meta_t *meta);
void app_meta_read(uint32_t addr, app_meta_t *meta);

#endif
